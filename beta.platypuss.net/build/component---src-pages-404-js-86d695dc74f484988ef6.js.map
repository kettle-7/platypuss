{"version":3,"file":"component---src-pages-404-js-86d695dc74f484988ef6.js","mappings":"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","sources":["webpack://platypuss-beta/./src/components/rgb.js","webpack://platypuss-beta/./src/pages/404.js"],"sourcesContent":["/************************************************************************\n* Copyright 2021-2024 Moss Finder                                       *\n*                                                                       *\n* This program is free software: you can redistribute it and/or modify  *\n* it under the terms of the GNU General Public License as published by  *\n* the Free Software Foundation, either version 3 of the License, or     *\n* (at your option) any later version.                                   *\n*                                                                       *\n* This program is distributed in the hope that it will be useful,       *\n* but WITHOUT ANY WARRANTY; without even the implied warranty of        *\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the         *\n* GNU General Public License for more details.                          *\n*                                                                       *\n* You should have received a copy of the GNU General Public License     *\n* along with this program.  If not, see <http://www.gnu.org/licenses/>. *\n************************************************************************/\n\n// Convert a hex string \"7600bc\" to a list of rgb values [118, 0, 188]\nfunction stringToRGB(hexString) {\n  let hex = parseInt(hexString, 16);\n  let convertedHex = [];\n  let finalHex = [];\n  for (let i = 0; i < 6; i++) {\n    convertedHex.unshift(hex % 16);\n    hex = (hex - (hex % 16)) / 16;\n  }\n  for (let i = 0; i < 6; i += 2) {\n    finalHex.push(convertedHex[i] * 16 + convertedHex[i+1]);\n  }\n  return finalHex;\n}\n\n// Convert a list of rgb values [118, 0, 188] into a hex string \"7600bc\"\nfunction RGBToString(RGB) {\n  let convertedString = [];\n  let finalString = \"\";\n  for (let i = 0; i < 3; i++) {\n    convertedString.push(Math.floor(((RGB[i] - RGB[i] % 16) / 16)).toString(16), Math.floor((RGB[i] % 16)).toString(16));\n  }\n  for (let i = 0; i < 6; i++) {\n      finalString += convertedString[i];\n  }\n  return finalString;\n}\n\n// Multiply a list of rgb values by a specific number\nfunction multiplyRGB(RGB, multiplier) {\n  let newRGB = [];\n  for (let i = 0; i < 3; i++) {\n    newRGB.push(RGB[i] * multiplier);\n  }\n  return newRGB;\n}\n\n// Update the custom theme settings to a specific color pallete\nexport default function updateCustomTheme(attemptHex, states) {\n  attemptHex = attemptHex.toLowerCase();\n  let darkColorFix = attemptHex;\n  for (let i = 0; i < 5; i++) {\n    if (darkColorFix[0] !== \"0\") break;\n    darkColorFix = darkColorFix.slice(1);\n  }\n\n  if (attemptHex.length !== 6 || parseInt(attemptHex, 16).toString(16) !== darkColorFix) return;\n\n  setTimeout(()=>{states.setThemeHex(attemptHex)}, 50);\n  localStorage.setItem(\"themeHex\", attemptHex);\n\n  let rgb = stringToRGB(attemptHex);\n\n  let colorScheme = 0;\n  for (let i = 0; i < 3; i++) colorScheme += rgb[i];\n\n  let primaryColor = \"#\" + attemptHex;\n  let secondaryColor = \"#\" + RGBToString(multiplyRGB(rgb, 0.75));\n  if (colorScheme > 382.5) {\n    document.body.style.setProperty('--foreground-level1', \"#000000\");\n    document.body.style.setProperty('--foreground-level2', \"#222222\");\n    document.body.style.setProperty('--accent', \"#b300ff\");\n  }\n  else {\n    document.body.style.setProperty('--foreground-level1', \"#ffffff\");\n    document.body.style.setProperty('--foreground-level2', \"#e0e0e0\");\n    document.body.style.setProperty('--accent', \"#c847ff\");\n  }\n\n  document.body.style.setProperty('--outgradient', primaryColor);\n  document.body.style.setProperty('--ingradient', primaryColor);\n  document.body.style.setProperty('--outgradientsmooth', \"linear-gradient(\" + primaryColor + \", \" + secondaryColor + \")\");\n  document.body.style.setProperty('--ingradientsmooth', \"linear-gradient(\" + secondaryColor + \", \" + primaryColor + \")\");\n  document.body.style.setProperty('--background-level1', \"#\" + RGBToString(multiplyRGB(rgb, 0.82189542485)));\n  document.body.style.setProperty('--background-level2', \"#\" + RGBToString(multiplyRGB(rgb, 0.85751633988)));\n  document.body.style.setProperty('--background-level3', \"#\" + RGBToString(multiplyRGB(rgb, 0.89313725491)));\n  document.body.style.setProperty('--background-level4', \"#\" + RGBToString(multiplyRGB(rgb, 0.92875816994)));\n  document.body.style.setProperty('--background-level5', \"#\" + RGBToString(multiplyRGB(rgb, 0.96437908497)));\n  document.body.style.setProperty('--background-level6', primaryColor);\n  document.body.style.setProperty('--grey', \"#888888\");\n}","/************************************************************************\n* Copyright 2021-2024 Ben Keppel, Moss Finder                           *\n*                                                                       *\n* This program is free software: you can redistribute it and/or modify  *\n* it under the terms of the GNU General Public License as published by  *\n* the Free Software Foundation, either version 3 of the License, or     *\n* (at your option) any later version.                                   *\n*                                                                       *\n* This program is distributed in the hope that it will be useful,       *\n* but WITHOUT ANY WARRANTY; without even the implied warranty of        *\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the         *\n* GNU General Public License for more details.                          *\n*                                                                       *\n* You should have received a copy of the GNU General Public License     *\n* along with this program.  If not, see <http://www.gnu.org/licenses/>. *\n************************************************************************/\n\nimport updateCustomTheme from '../components/rgb';\nimport * as React from \"react\";\nimport \"./themery.scss\";\n\nconst emailRegexp = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/gi;\nvar browser = typeof window !== \"undefined\"; // check if we're running in a browser rather than the build environment\nvar pageUrl = browser ? new URL(window.location) : new URL(\"http://localhost:8000\"); // window is not defined in the testing environment so just assume localhost\nconst authUrl = \"https://platypuss.net\"; // this shouldn't need to change but just in case\nvar states = {}; // One global variable for storing React state objects so we can access them anywhere\nvar emailRef, passwordRef, confirmPasswordRef, usernameRef;\n\n// thanks bryc on stack overflow ^w^\nfunction hashPassword (str, seed = 20) { // hashes passwords somehow\n  let h1 = 0xdeadbeef ^ seed, // had to be something\n  h2 = 0x41c6ce57 ^ seed;\n  for (let i = 0, ch; i < str.length; i++) {\n      ch = str.charCodeAt(i);\n      // Math.imul multiplies without loss of precision\n      h1 = Math.imul(h1 ^ ch, 2654435761);\n      h2 = Math.imul(h2 ^ ch, 1597334677);\n  }\n  \n  h1 = Math.imul(h1 ^ (h1 >>> 16), 2246822507) ^ Math.imul(h2 ^ (h2 >>> 13), 3266489909);\n  h2 = Math.imul(h2 ^ (h2 >>> 16), 2246822507) ^ Math.imul(h1 ^ (h1 >>> 13), 3266489909);\n\n  return (h2>>>0).toString(16).padStart(8,0)+(h1>>>0).toString(16).padStart(8,0);\n};\n\nfunction doTheLoginThingy(createNewAccount) {\n  if (createNewAccount) {\n    if (passwordRef.current.value !== confirmPasswordRef.current.value) {\n      states.setActivePopover(<Popover title=\"Create Account\"><CreateAccountPopover error=\"Your passwords don't match\"/></Popover>);\n      return;\n    }\n    if (passwordRef.current.value.replace(/[\\n\\r\\t ]/g, \"\") === \"\") {\n      states.setActivePopover(<Popover title=\"Create Account\"><CreateAccountPopover error=\"Your password must be at least one character\"/></Popover>);\n      return;\n    }\n    if (usernameRef.current.value.replace(/[\\n\\r\\t ]/g, \"\") === \"\") {\n      states.setActivePopover(<Popover title=\"Create Account\"><CreateAccountPopover error=\"Your username must be at least one character\"/></Popover>);\n      return;\n    }\n  }\n  fetch(`${authUrl}/login`, { // send this data to the authentication server, accepting a json response\n    method: \"POST\",\n    headers: {\n      'Content-Type': 'text/plain'\n    },\n    body: JSON.stringify({ // the information we send to the authentication server\n      createNew: createNewAccount,\n      server: \"example.com\", // can be anything so long as no platypuss server will actually be hosted there,\n      email: emailRef.current.value,\n      username: createNewAccount ? usernameRef.current.value : undefined,\n      password: hashPassword(passwordRef.current.value)\n    })\n    // we take the response and save the session token to the browser\n  }).then(response => response.json()).then(response => {\n    if (createNewAccount) {\n      if (response.alreadyExists) {\n        states.setActivePopover(<Popover title=\"Create Account\"><CreateAccountPopover error={<>There's already an account with that email address,\n          would you like to <a href=\"#\" onClick={() => states.setActivePopover(<Popover title=\"Sign In\"><SignInPopover/></Popover>)}>sign in</a> instead?</>}/></Popover>);\n        return;\n      }\n      states.setActivePopover(<Popover title=\"Check your emails!\">Thanks for joining us, \n        you should get <br/> an email in the next few minutes to <br/> confirm the new account.</Popover>);\n      return;\n    } else {\n      if (!response.alreadyExists) {\n        states.setActivePopover(<Popover title=\"Sign In\"><SignInPopover error={<>There's no account with that email address,\n          would you like to <a href=\"#\" onClick={() => states.setActivePopover(<Popover title=\"Create Account\"><CreateAccountPopover/></Popover>)}>create one</a>?</>}/></Popover>);\n        return;\n      }\n      if (!response.passwordMatches) {\n        states.setActivePopover(<Popover title=\"Sign In\"><SignInPopover error=\"Incorrect password for this account\"/></Popover>);\n        return;\n      }\n    }\n    localStorage.setItem(\"sessionID\", response.sessionID);\n    window.location = \"/chat\";\n  });\n}\n\nfunction AccountSettings() {\n  let customThemeDisplayRef = React.useRef(null);\n  let customThemeEditRef = React.useRef(null);\n  let aboutMeRef = React.useRef(null);\n\n  React.useEffect(() => {\n    aboutMeRef.current.innerText = states.accountInformation.aboutMe.text;\n  }, [states.accountInformation]);\n  \n  return (\n    <>\n      <div id=\"profileBanner\">\n        <div className=\"avatar\" id=\"changeAvatarHoverButton\" onClick={() => {\n          let input = document.createElement('input');\n          input.type = \"file\";\n          input.multiple = false;\n          input.accept = \"image/*\";\n          input.onchange = async function (event) {\n            let file = event.target.files[0];\n            if (file.size >= 10000000) {\n              states.setActivePopover(<Popover title=\"Woah, that's too big!\">\n                We only allow avatar sizes up to 10MB, this is to save storage space on the server. Please choose a smaller image or resize it in an image editor.\n              </Popover>);\n              return;\n            }\n            let request = new XMLHttpRequest();\n            request.open(\"POST\", `${authUrl}/pfpUpload?id=${localStorage.getItem(\"sessionID\")}`);\n            request.onreadystatechange = () => {\n              if (request.readyState === XMLHttpRequest.DONE && request.status) {\n                window.location.reload();\n              }\n              else {\n                console.log(request);\n              }\n            };\n            request.upload.onprogress = (event) => {\n              states.setAvatarProgress(event.loaded/event.total*100);\n            };\n            request.send(await file.bytes());\n          };\n          input.click();\n        }}>\n          <img className=\"avatar\" id=\"changeAvatar\" src={authUrl+states.accountInformation.avatar}/>\n          <span id=\"changeAvatarText\">Change</span>\n        </div>\n        <h3 id=\"accountSettingsUsername\" contentEditable>{states.accountInformation.username}</h3> @{states.accountInformation.tag}\n      </div>\n      <h5>Tell us a bit about you:</h5>\n      <div contentEditable id=\"changeAboutMe\" ref={aboutMeRef} onInput={() => {\n        fetch(`${authUrl}/editAboutMe?id=${localStorage.getItem(\"sessionID\")}`, {\n          headers: {\n            'Content-Type': 'text/plain'\n          },\n          method: \"POST\",\n          body: JSON.stringify({text: aboutMeRef.current.innerText})\n        });\n        let newAccountInformation = {...states.accountInformation};\n        newAccountInformation.aboutMe.text = aboutMeRef.current.innerText;\n        states.setAccountInformation(newAccountInformation);\n      }}/>\n      <div style={{\n          flexGrow: 0,\n          display: \"flex\",\n          flexDirection: \"row\",\n          gap: 5,\n          alignItems: \"center\"\n          }}>\n        Theme:\n        <select defaultValue={states.theme}>\n          <option value=\"dark\" onClick={() => {setTimeout(() => {\n            states.setTheme(\"dark\");\n            localStorage.setItem(\"theme\", \"dark\");\n            customThemeDisplayRef.current.hidden = true;\n          }, 50);}}>Dark</option>\n          <option value=\"medium\" onClick={() => {setTimeout(() => {\n            states.setTheme(\"medium\");\n            localStorage.setItem(\"theme\", \"medium\");\n            customThemeDisplayRef.current.hidden = true;\n          }, 50);}}>Medium</option>\n          <option value=\"light\" onClick={() => {setTimeout(() => {\n            states.setTheme(\"light\");\n            localStorage.setItem(\"theme\", \"light\");\n            customThemeDisplayRef.current.hidden = true;\n          }, 50);}}>Light</option>\n          <option value=\"green\" onClick={() => {setTimeout(() => {\n            states.setTheme(\"green\");\n            localStorage.setItem(\"theme\", \"green\");\n            customThemeDisplayRef.current.hidden = true;\n          }, 50);}}>Greeeeeeeeeeeeeeeeeeeeeeeeeeen</option>\n          <option value=\"custom\" onClick={() => {setTimeout(() => {\n            states.setTheme(\"custom\");\n            localStorage.setItem(\"theme\", \"custom\");\n            customThemeDisplayRef.current.hidden = false;\n          }, 50);}}>Custom</option>\n        </select>\n      </div>\n      <span hidden={states.theme !== \"custom\"} ref={customThemeDisplayRef}>Custom Theme Hex Colour: #\n        <span id=\"accountSettingsCustomTheme\" contentEditable\n        ref={customThemeEditRef} onInput={() => {\n            updateCustomTheme(customThemeEditRef.current.innerText, states);\n          }}>\n          {states.themeHex}\n        </span>\n      </span>\n      <button onClick={() => {\n      setTimeout(() => {\n        states.setActivePopover(<Popover title={\"Do you really want to delete your account?\"}>\n          <button onClick={() => {\n            fetch(authUrl+'/deleteAccount?id='+localStorage.getItem(\"sessionID\")).then(() => {\n              window.location = \"/\";\n            });\n          }}>Yes</button>\n          <button onClick={() => {\n            setTimeout(() => {\n              states.setActivePopover(<Popover title=\"Account Settings\"><AccountSettings/></Popover>);\n            }, 50);\n          }}>No</button>\n        </Popover>);\n      }, 50);\n      }}>Delete Account</button>\n      <button>Change Password</button>\n      <button onClick={() => {\n        localStorage.setItem(\"sessionID\", null);\n        window.location = \"/\";\n      }}>Log Out</button>\n      <button onClick={() => {states.setActivePopover(null);}}>Done</button>\n    </>\n  );\n}\n\nfunction PageHeader ({title, iconClickEvent, ...props}) {\n  React.useEffect(() => {\n    fetch(authUrl + \"/uinfo?id=\" + localStorage.getItem(\"sessionID\"))\n      .then(data => data.json())\n      .then(data => states.setAccountInformation(data))\n      .catch(() => { if (pageUrl.pathname === \"/chat\") window.location = \"/\" });\n  }, []);\n\n  return (<header {...props}>\n    <img className=\"avatar\" onClick={iconClickEvent ? iconClickEvent : () => {window.location = \"/\"}} style={{cursor: \"pointer\"}} src=\"/icons/icon-96x96.png\"/>\n    <h2 onClick={() => {window.location = \"/\"}} style={{cursor: \"pointer\"}}>\n        {title ? title : \"(Beta!) Platypuss\"}\n    </h2>\n    <div style={{flexGrow: 1}}></div>\n    <img className=\"avatar\" style={{cursor: \"pointer\", display: Object.keys(states.accountInformation).length ? \"flex\" : \"none\"}} src={authUrl+states.accountInformation.avatar} onClick={() => {\n      states.setActivePopover(<Popover title=\"Account Settings\"><AccountSettings/></Popover>);\n    }}/>\n  </header>);\n};\n\nfunction PopoverParent({...props}) {\n  [states.activePopover, states.setActivePopover] = React.useState(null);\n  return (\n    <div id=\"popoverParent\" style={{display: \"flex\", height: states.activePopover === null ? 0 : \"100%\"}} onMouseDown={() => {setTimeout(() => {\n      states.setActivePopover(null);\n    }, 50)}} {...props}>{states.activePopover || <Popover style={{opacity: 0}}/>}</div>\n  );\n}\n\n// for popups / popovers in desktop, render as separate screens on mobile\nfunction Popover({children, title, style={}, ...props}) {\n  let popoverRef = React.useRef(null);\n  return <div id=\"popover\" style={{margin: style.margin ? style.margin : \"auto\", /*height: 0,*/ ...style}} onClick={event => {\n    event.stopPropagation();\n  }} onMouseDown={event => {\n    event.stopPropagation();\n  }} className={states.activePopover ? \"slideUp\" : \"\"} ref={popoverRef} {...props}>\n    {title ? <div id=\"popoverHeaderBar\">\n      <h3>{title}</h3>\n      <div style={{flexGrow: 1}}></div>\n      <button onClick={()=>{setTimeout(()=>{states.setActivePopover(null);}, 50)}} className=\"material-symbols-outlined\">close</button>\n    </div> : <button onClick={()=>{setTimeout(()=>{states.setActivePopover(null);}, 50)}} style={{\n      position: \"absolute\",\n      top: 5,\n      right: 5\n    }} className=\"material-symbols-outlined\">close</button>}\n    {children}\n  </div>\n}\n\nfunction SignInPopover ({ error=\"\" }) {\n  return (<>\n    <span>Welcome back! If you don't already have an account please <a href=\"#\" onClick={() => states.setActivePopover(<Popover title=\"Create Account\"><CreateAccountPopover/></Popover>)}>create an account</a> instead.</span>\n    <p><em>temporary notice: i accidentally removed everyone's emails so if you haven't already then please put in your username as well as your email so i can tie it back to your account. thanks for all your patience!</em></p>\n    <div id=\"loginform\">\n      <em id=\"signInErrorMessage\">{error}</em>\n      <div style={{display:\"grid\",gridTemplateColumns:\"auto auto\"}}>\n        <label>Email address </label><input type=\"email\" id=\"email\" className=\"textBox\" ref={emailRef}/>\n        <label>Username </label><input type=\"text\" id=\"username\" className='textBox' ref={usernameRef}></input>\n        <label>Password </label><input type=\"password\" id=\"password\" className=\"textBox\" ref={passwordRef}/>\n      </div>\n    </div>\n    <button onClick={() => {setTimeout(() => {\n      states.setActivePopover(\n        <Popover title=\"Account Recovery\">\n          <span>\n            Forgotten your password? No worries, we can send you an email to let you\n            log in without it, and you can then change your password to something else\n            through the account settings menu in the top right of this page.\n          </span>\n          <hr/>\n          <div className='horizontalbox' style={{gap: 10}}>\n            <label>Email address </label><input type=\"email\" ref={emailRef}/>\n          </div>\n          <button onClick={() => {\n            fetch(authUrl+\"/requestAccountRecovery?accountEmailAddress=\"+emailRef.current.value)\n              .then(response => response.text())\n              .then(text => states.setActivePopover(<Popover title=\"Account Recovery\">{text}</Popover>));\n            }}>Send</button>\n          <button onClick={() => {setTimeout(() => {\n            states.setActivePopover(null);\n          }, 50);}}>Cancel</button>\n        </Popover>\n      );\n    }, 50);}}>Forgot Password?</button>\n    <button onClick={() => doTheLoginThingy(false)}>Sign In</button>\n  </>);\n}\n\nfunction CreateAccountPopover ({ error=\"\" }) {\n  return (<>\n  <span>Welcome to Platypuss! If you already have an account please <a href=\"#\" onClick={() => states.setActivePopover(<Popover title=\"Sign In\"><SignInPopover/></Popover>)}>sign in</a> instead.</span>\n  <br/><strong>By using Platypuss you confirm that you have read and agreed to our <a href=\"/legal\">legal agreements</a>.</strong>\n    <div id=\"loginform\">\n      {error ? <em id=\"signInErrorMessage\">{error}</em> : \"\"}\n      <div style={{display:\"grid\",gridTemplateColumns:\"auto auto\"}}>\n        <label>Email address </label><input type=\"email\" id=\"email\" className=\"textBox\" ref={emailRef}/>\n        <label>Username </label><input type=\"text\" id=\"unam\" className=\"textBox\" ref={usernameRef}/>\n        <label>Password </label><input type=\"password\" id=\"password\" className=\"textBox\" ref={passwordRef}/>\n        <label>Confirm Password </label><input type=\"password\" id=\"confirmPassword\" className=\"textBox\" ref={confirmPasswordRef}/>\n      </div>\n    </div>\n    <button onClick={() => doTheLoginThingy(true)}>Create Account</button>\n  </>);\n}\n\nconst Error404Page = () => {\n  // Get the account information for the user\n  [states.accountInformation, states.setAccountInformation] = React.useState({});\n\n  React.useEffect(() => {\n      fetch(authUrl + \"/uinfo?id=\" + localStorage.getItem(\"sessionID\"))\n          .then(data => data.json())\n          .then(data => states.setAccountInformation(data))\n          .catch(() => { if (pageUrl.pathname === \"/chat\") window.location = \"/\" });\n  }, []);\n\n  // These let us refer to the text boxes later on\n  emailRef = React.useRef(null);\n  passwordRef = React.useRef(null);\n  usernameRef = React.useRef(null);\n  confirmPasswordRef = React.useRef(null);\n  \n  let theme = \"medium\";\n  let themeHex = \"000000\";\n  if (browser && !states.hasRendered) {\n    themeHex = localStorage.getItem(\"themeHex\");\n    if (themeHex == null) themeHex = \"000000\";\n    switch (localStorage.getItem(\"theme\")) {\n      case \"custom\":\n      case \"dark\":\n      case \"light\":\n      case \"green\":\n      case \"medium\":\n        theme = localStorage.getItem(\"theme\");\n        break;\n      default:\n        break;\n    }\n  }\n\n  [states.theme, states.setTheme] = React.useState(theme); // what theme we're using\n  [states.themeHex, states.setThemeHex] = React.useState(themeHex); // hex colour code of our custom theme\n\n  return (<>\n    <PageHeader className={\n      states.theme === \"custom\" ? \"\" :\n      states.theme === \"green\" ? \"greenThemed\" :\n      states.theme === \"light\" ? \"lightThemed\" :\n      \"darkThemed\"}/>\n    <main id=\"mainPage\" className={\n      states.theme === \"custom\" ? \"\" :\n      states.theme === \"green\" ? \"greenThemed\" :\n      states.theme === \"dark\" ? \"darkThemed\" :\n      \"lightThemed\"}>\n      <h2>Error 404</h2>\n      <p>\n        This page does not exist. It may have been moved, deleted or eaten by a whale.\n        If a link on the website took you here please contact whoever sent you the link and let them know.\n      </p>\n      <a href=\"/\">Here's our homepage though if you're interested.</a>\n      <h6>nothing here :3</h6>\n    </main>\n    <footer className={\n      states.theme === \"custom\" ? \"\" :\n      states.theme === \"green\" ? \"greenThemed\" :\n      states.theme === \"dark\" ? \"darkThemed\" :\n      \"lightThemed\"}>do you like the new interim logo? if not then feel free to design your own and hit me up with a <a href=\"https://github.com/kettle-7/platypuss/issues/new\">github issue</a></footer>\n    <PopoverParent className={\n      states.theme === \"custom\" ? \"\" :\n      states.theme === \"green\" ? \"greenThemed\" :\n      states.theme === \"dark\" ? \"darkThemed\" :\n      \"lightThemed\"}/>\n  </>);\n};\n\nexport default Error404Page;\n\nexport const Head = () => (\n  <title>Page not found | Beta Platypuss</title>\n);\n\n"],"names":["RGBToString","RGB","convertedString","finalString","i","push","Math","floor","toString","multiplyRGB","multiplier","newRGB","updateCustomTheme","attemptHex","states","darkColorFix","toLowerCase","slice","length","parseInt","setTimeout","setThemeHex","localStorage","setItem","rgb","hexString","hex","convertedHex","finalHex","unshift","stringToRGB","colorScheme","primaryColor","secondaryColor","document","body","style","setProperty","browser","window","pageUrl","URL","location","authUrl","AccountSettings","customThemeDisplayRef","React","customThemeEditRef","aboutMeRef","current","innerText","accountInformation","aboutMe","text","id","className","onClick","input","createElement","type","multiple","accept","onchange","async","event","file","target","files","size","setActivePopover","Popover","title","request","XMLHttpRequest","open","getItem","onreadystatechange","readyState","DONE","status","reload","console","log","upload","onprogress","setAvatarProgress","loaded","total","send","bytes","click","src","avatar","contentEditable","username","tag","ref","onInput","fetch","headers","method","JSON","stringify","newAccountInformation","setAccountInformation","flexGrow","display","flexDirection","gap","alignItems","defaultValue","theme","value","setTheme","hidden","themeHex","then","PageHeader","iconClickEvent","props","data","json","catch","pathname","cursor","Object","keys","PopoverParent","activePopover","_extends","height","onMouseDown","opacity","children","popoverRef","margin","stopPropagation","position","top","right","Error404Page","hasRendered","href","Head"],"sourceRoot":""}