"use strict";(self.webpackChunkplatypuss_beta=self.webpackChunkplatypuss_beta||[]).push([[649],{4852:function(e,t,s){s.d(t,{z:function(){return r}});var n=s(6540);const r=({title:e,iconClickEvent:t})=>n.createElement("header",null,n.createElement("img",{onClick:t||(()=>{window.location="/"}),style:{cursor:"pointer"},src:"/icons/icon-48x48.png"}),n.createElement("h2",{onClick:()=>{window.location="/"},style:{cursor:"pointer"}},e||"(Beta!) Platypuss"))},6965:function(e,t,s){s.r(t),s.d(t,{Head:function(){return b},default:function(){return E}});var n=s(4852),r=s(6540),o={},a={populated:!1},l={},i={},c="undefined"!=typeof window,d=c?new URL(window.location):new URL("http://localhost:8000"),m="https://platypuss.net";function u(e,t=20){let s=3735928559^t,n=1103547991^t;for(let r,o=0;o<e.length;o++)r=e.charCodeAt(o),s=Math.imul(s^r,2654435761),n=Math.imul(n^r,1597334677);return s=Math.imul(s^s>>>16,2246822507)^Math.imul(n^n>>>13,3266489909),n=Math.imul(n^n>>>16,2246822507)^Math.imul(s^s>>>13,3266489909),(n>>>0).toString(16).padStart(8,0)+(s>>>0).toString(16).padStart(8,0)}function v({shown:e}){return r.createElement("div",{className:"sidebar",id:"serversBar",style:{display:e?"flex":"none"}},r.createElement("img",{className:"serverIcon",src:"",alt:"+",id:"newServerButton"}),Object.values(a.servers).map((e=>r.createElement(p,{server:e}))))}function f({focusedServer:e,shown:t}){return r.createElement("div",{className:"sidebar",id:"serversBar",style:{display:t?"flex":"none"}},r.createElement("img",{className:"serverIcon material-symbols-outlined",src:"",alt:"+",id:"newServerButton"}))}function h({message:e}){return r.createElement("div",{className:"message1"},r.createElement("img",{src:o[e.author].avatar,alt:""}),r.createElement("div",{className:"message2"},r.createElement("h3",{className:"messageUsernameDisplay"},o[e.author].username),r.createElement("p",null,e.content)))}function S({shown:e}){return r.createElement("div",{id:"middleSection",style:{display:e?"flex":"none"}},r.createElement("div",{id:"aboveScrolledArea"}),r.createElement("div",{id:"scrolledArea"}," ",r.createElement("div",{id:"aboveMessageArea"}),r.createElement("div",{id:"messageArea"},Object.values(a.focusedRoomRenderedMessages).map((e=>r.createElement(h,null)))),r.createElement("div",{id:"belowMessageArea"})),r.createElement("div",{id:"belowScrolledArea"}))}function p({server:e}){return[e.manifest,e.setManifest]=r.useState({icon:"",title:"Couldn't connect to this server 🐙"}),r.createElement("div",{className:"popoverContainer"},r.createElement("img",{className:"serverIcon",src:e.manifest.icon,alt:"🐙"}),r.createElement("div",{className:"serverIconPopover"},e.manifest.title))}function w({shown:e}){return r.createElement("div",{className:"sidebar",id:"roomsBar",style:{display:e?"flex":"none"}},r.createElement("div",{id:"serverTitle"},r.createElement("h3",{style:{margin:5}},"server name goes here ???")),Object.values(a.focusedServerRenderedRooms).map((e=>r.createElement(p,{server:e}))),0==Object.values(a.focusedServerRenderedRooms).length?r.createElement("p",null,"This server doesn't have any rooms in it."):r.createElement(r.Fragment,null))}d.protocol="https";const b=()=>r.createElement("title",null,"(Beta!) Platypuss");function E(){return[a.servers,a.setServers]=r.useState({}),[a.focusedRoomRenderedMessages,a.setFocusedRoomRenderedMessages]=r.useState({}),[a.focusedServer,a.setFocusedServer]=r.useState({manifest:{}}),[a.focusedRoom,a.setFocusedRoom]=r.useState({}),[a.focusedServerRenderedRooms,a.setFocusedServerRenderedRooms]=r.useState({}),[a.mobileSidebarShown,a.setMobileSidebarShown]=r.useState(!0),[a.useMobileUI,a.setUseMobileUI]=r.useState(!!c&&2.54*window.innerWidth/96/window.devicePixelRatio<20),c&&window.addEventListener("resize",(()=>{a.setUseMobileUI(!!c&&2.54*window.innerWidth/96/window.devicePixelRatio<20)})),console.log(a.populated),a.populated||async function(){if("undefined"!=typeof window){for(let e of Object.keys(a.focusedRoomRenderedMessages))delete a.focusedRoomRenderedMessages[e];a.setFocusedRoomRenderedMessages({}),fetch(`${m}/getServerTokens?id=${localStorage.getItem("sessionID")}`).then((e=>e.json())).then((async function(e){for(let s of Object.values(l))s.close();for(let s in e.servers)i[s]=u(s),a.focusedServer=={manifest:{}}&&window.location.toString().replace(/^.*\#/g,"")==i[s]&&a.setFocusedServer(s);let t={};for(let s of Object.keys(e.servers)){let e=s.split(" "),n=e[0],r=e[1],o=e[2];t[s]={ip:n,inviteCode:r,subserver:o,manifest:{title:"Loading",icon:"/icon.png",memberCount:0,public:!1,description:"Waiting for a response from the server"}},fetch(d.protocol+"//"+n.toString()+"/"+o).then((e=>e.json())).then((e=>{t=a.servers,t[s].setManifest(e),a.setServers(t)})).catch((e=>{console.log(e)}))}console.log(t),a.setServers(t),a.focusedServer=={manifest:{}}&&a.setFocusedServer(a.servers[Object.keys(e.servers)[0]])})).catch((e=>console.log(e)))}}(),a.populated=!0,r.createElement(r.Fragment,null,r.createElement(n.z,{title:a.focusedServer.manifest.title,iconClickEvent:()=>{a.useMobileUI?a.setMobileSidebarShown(!a.mobileSidebarShown):window.location="/"}}),r.createElement("main",null,r.createElement("div",{id:"chatPage"},r.createElement(v,{shown:a.mobileSidebarShown||!a.useMobileUI}),r.createElement(w,{shown:a.mobileSidebarShown||!a.useMobileUI}),r.createElement(S,{shown:!a.mobileSidebarShown||!a.useMobileUI}),r.createElement(f,{shown:a.mobileSidebarShown||!a.useMobileUI}))))}}}]);
//# sourceMappingURL=component---src-pages-chat-js-babd1ebda96eb54dc185.js.map