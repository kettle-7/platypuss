"use strict";(self.webpackChunkplatypuss_beta=self.webpackChunkplatypuss_beta||[]).push([[293],{3034:function(e,t,n){function r(e){let t=[],n="";for(let r=0;r<3;r++)t.push(Math.floor((e[r]-e[r]%16)/16).toString(16),Math.floor(e[r]%16).toString(16));for(let r=0;r<6;r++)n+=t[r];return n}function a(e,t){let n=[];for(let r=0;r<3;r++)n.push(e[r]*t);return n}function o(e,t){let n=e=e.toLowerCase();for(let r=0;r<5&&"0"===n[0];r++)n=n.slice(1);if(6!==e.length||parseInt(e,16).toString(16)!==n)return;setTimeout((()=>{t.setThemeHex(e)}),50),localStorage.setItem("themeHex",e);let o=function(e){let t=parseInt(e,16),n=[],r=[];for(let a=0;a<6;a++)n.unshift(t%16),t=(t-t%16)/16;for(let a=0;a<6;a+=2)r.push(16*n[a]+n[a+1]);return r}(e),l=0;for(let r=0;r<3;r++)l+=o[r];let c="#"+e,s="#"+r(a(o,.75));l>382.5?(document.body.style.setProperty("--foreground-level1","#000000"),document.body.style.setProperty("--foreground-level2","#222222"),document.body.style.setProperty("--accent","#b300ff")):(document.body.style.setProperty("--foreground-level1","#ffffff"),document.body.style.setProperty("--foreground-level2","#e0e0e0"),document.body.style.setProperty("--accent","#c847ff")),document.body.style.setProperty("--outgradient",c),document.body.style.setProperty("--ingradient",c),document.body.style.setProperty("--outgradientsmooth","linear-gradient("+c+", "+s+")"),document.body.style.setProperty("--ingradientsmooth","linear-gradient("+s+", "+c+")"),document.body.style.setProperty("--background-level1","#"+r(a(o,.82189542485))),document.body.style.setProperty("--background-level2","#"+r(a(o,.85751633988))),document.body.style.setProperty("--background-level3","#"+r(a(o,.89313725491))),document.body.style.setProperty("--background-level4","#"+r(a(o,.92875816994))),document.body.style.setProperty("--background-level5","#"+r(a(o,.96437908497))),document.body.style.setProperty("--background-level6",c),document.body.style.setProperty("--grey","#888888")}n.d(t,{A:function(){return o}})},2020:function(e,t,n){n.r(t),n.d(t,{Head:function(){return w}});var r=n(3034),a=n(6540);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}var l="undefined"!=typeof window,c=l?new URL(window.location):new URL("http://localhost:8000");const s="https://platypuss.net";var i,m,u,d,h={};function p(e,t=20){let n=3735928559^t,r=1103547991^t;for(let a,o=0;o<e.length;o++)a=e.charCodeAt(o),n=Math.imul(n^a,2654435761),r=Math.imul(r^a,1597334677);return n=Math.imul(n^n>>>16,2246822507)^Math.imul(r^r>>>13,3266489909),r=Math.imul(r^r>>>16,2246822507)^Math.imul(n^n>>>13,3266489909),(r>>>0).toString(16).padStart(8,0)+(n>>>0).toString(16).padStart(8,0)}function g(e){if(e){if(m.current.value!==u.current.value)return void h.setActivePopover(a.createElement(b,{error:"Your passwords don't match"}));if(""===m.current.value.replace(/[\n\r\t ]/g,""))return void h.setActivePopover(a.createElement(b,{error:"Your password must be at least one character"}));if(""===d.current.value.replace(/[\n\r\t ]/g,""))return void h.setActivePopover(a.createElement(b,{error:"Your username must be at least one character"}))}fetch(`${s}/login`,{method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify({createNew:e,server:"example.com",email:i.current.value,username:e?d.current.value:void 0,password:p(m.current.value)})}).then((e=>e.json())).then((t=>{if(e)return t.alreadyExists?void h.setActivePopover(a.createElement(b,{error:a.createElement(a.Fragment,null,"There's already an account with that email address, would you like to ",a.createElement("a",{href:"#",onClick:()=>h.setActivePopover(a.createElement(E,null))},"sign in")," instead?")})):void h.setActivePopover(a.createElement(v,{title:"Check your emails!"},"Thanks for joining us, you should get ",a.createElement("br",null)," an email in the next few minutes to ",a.createElement("br",null)," confirm the new account."));t.alreadyExists?t.passwordMatches?(localStorage.setItem("sessionID",t.sessionID),window.location="/chat"):h.setActivePopover(a.createElement(E,{error:"Incorrect password for this account"})):h.setActivePopover(a.createElement(E,{error:a.createElement(a.Fragment,null,"There's no account with that email address, would you like to ",a.createElement("a",{href:"#",onClick:()=>h.setActivePopover(a.createElement(b,null))},"create one"),"?")}))}))}function f({title:e,iconClickEvent:t,...n}){let o=a.useRef(null),l=a.useRef(null);return a.useEffect((()=>{fetch(s+"/uinfo?id="+localStorage.getItem("sessionID")).then((e=>e.json())).then((e=>h.setAccountInformation(e))).catch((()=>{"/chat"===c.pathname&&(window.location="/")}))}),[]),a.createElement("header",n,a.createElement("img",{className:"avatar",onClick:t||(()=>{window.location="/"}),style:{cursor:"pointer"},src:"/icons/icon-48x48.png"}),a.createElement("h2",{onClick:()=>{window.location="/"},style:{cursor:"pointer"}},e||"(Beta!) Platypuss"),a.createElement("div",{style:{flexGrow:1}}),a.createElement("img",{className:"avatar",style:{cursor:"pointer"},src:s+h.accountInformation.avatar,onClick:()=>{h.setActivePopover(a.createElement(v,{title:"Account Settings"},a.createElement("div",{id:"profileBanner"},a.createElement("div",{className:"avatar",id:"changeAvatarHoverButton",onClick:()=>{let e=document.createElement("input");e.type="file",e.multiple=!1,e.accept="image/*",e.onchange=async function(e){let t=e.target.files[0];if(t.size>=1e7)return void h.setActivePopover(a.createElement(v,{title:"Woah, that's too big!"},"We only allow avatar sizes up to 10MB, this is to save storage space on the server. Please choose a smaller image or resize it in an image editor."));let n=new XMLHttpRequest;n.open("POST",`${s}/pfpUpload?id=${localStorage.getItem("sessionID")}`),n.onreadystatechange=()=>{n.readyState===XMLHttpRequest.DONE&&n.status?window.location.reload():console.log(n)},n.upload.onprogress=e=>{h.setAvatarProgress(e.loaded/e.total*100)},n.send(await t.bytes())},e.click()}},a.createElement("img",{className:"avatar",id:"changeAvatar",src:s+h.accountInformation.avatar}),a.createElement("span",{id:"changeAvatarText"},"Change")),a.createElement("h3",{id:"accountSettingsUsername",contentEditable:!0},h.accountInformation.username)," @",h.accountInformation.tag),a.createElement("h5",null,"Tell us a bit about you:"),a.createElement("div",{contentEditable:!0,id:"changeAboutMe"}),a.createElement("div",{style:{flexGrow:0,display:"flex",flexDirection:"row",gap:5,alignItems:"center"}},"Theme:",a.createElement("select",{defaultValue:h.theme},a.createElement("option",{value:"dark",onClick:()=>{setTimeout((()=>{h.setTheme("dark"),localStorage.setItem("theme","dark"),o.current.hidden=!0}),50)}},"Dark"),a.createElement("option",{value:"medium",onClick:()=>{setTimeout((()=>{h.setTheme("medium"),localStorage.setItem("theme","medium"),o.current.hidden=!0}),50)}},"Medium"),a.createElement("option",{value:"light",onClick:()=>{setTimeout((()=>{h.setTheme("light"),localStorage.setItem("theme","light"),o.current.hidden=!0}),50)}},"Light"),a.createElement("option",{value:"green",onClick:()=>{setTimeout((()=>{h.setTheme("green"),localStorage.setItem("theme","green"),o.current.hidden=!0}),50)}},"Greeeeeeeeeeeeeeeeeeeeeeeeeeen"),a.createElement("option",{value:"custom",onClick:()=>{setTimeout((()=>{h.setTheme("custom"),localStorage.setItem("theme","custom"),o.current.hidden=!1}),50)}},"Custom"))),a.createElement("span",{hidden:"custom"!==h.theme,ref:o},"Custom Theme Hex Colour: #",a.createElement("span",{id:"accountSettingsCustomTheme",contentEditable:!0,ref:l,onInput:()=>{(0,r.A)(l.current.innerText,h)}},h.themeHex)),a.createElement("button",null,"Delete Account"),a.createElement("button",null,"Change Password"),a.createElement("button",{onClick:()=>{localStorage.setItem("sessionID",null),window.location="/"}},"Log Out"),a.createElement("button",{onClick:()=>{h.setActivePopover(null)}},"Done")))}}))}function y({...e}){return[h.activePopover,h.setActivePopover]=a.useState(null),a.createElement("div",o({id:"popoverParent",style:{display:null==h.activePopover?"none":"flex"},onClick:()=>{h.setActivePopover(null)}},e),h.activePopover)}function v({children:e,title:t,style:n={},...r}){return a.createElement("div",o({id:"popover",style:{margin:n.margin?n.margin:"auto",...n},onClick:e=>{e.stopPropagation()}},r),a.createElement("div",{id:"popoverHeaderBar"},a.createElement("h3",null,t),a.createElement("div",{style:{flexGrow:1}}),a.createElement("button",{onClick:()=>{h.setActivePopover(null)},className:"material-symbols-outlined"},"close")),e)}function E({error:e=""}){return a.createElement(v,{title:"Sign In"},a.createElement("span",null,"Welcome back! If you don't already have an account ",a.createElement("br",null)," please ",a.createElement("a",{href:"#",onClick:()=>h.setActivePopover(a.createElement(b,null))},"create an account")," instead."),a.createElement("div",{id:"loginform"},a.createElement("em",{id:"signInErrorMessage"},e),a.createElement("div",{style:{display:"grid",gridTemplateColumns:"auto auto"}},a.createElement("label",null,"Email address "),a.createElement("input",{type:"email",id:"email",className:"textBox",ref:i}),a.createElement("label",null,"Password "),a.createElement("input",{type:"password",id:"password",className:"textBox",ref:m})),a.createElement("br",null),a.createElement("button",{onClick:()=>g(!1)},"Sign In")))}function b({error:e=""}){return a.createElement(v,{title:"Create Account"},a.createElement("span",null,"Welcome to Platypuss! If you already have an account ",a.createElement("br",null)," please ",a.createElement("a",{href:"#",onClick:()=>h.setActivePopover(a.createElement(E,null))},"sign in")," instead."),a.createElement("div",{id:"loginform"},e?a.createElement("em",{id:"signInErrorMessage"},e):"",a.createElement("div",{style:{display:"grid",gridTemplateColumns:"auto auto"}},a.createElement("label",null,"Email address "),a.createElement("input",{type:"email",id:"email",className:"textBox",ref:i}),a.createElement("label",null,"Username "),a.createElement("input",{type:"text",id:"unam",className:"textBox",ref:d}),a.createElement("label",null,"Password "),a.createElement("input",{type:"password",id:"password",className:"textBox",ref:m}),a.createElement("label",null,"Confirm Password "),a.createElement("input",{type:"password",id:"confirmPassword",className:"textBox",ref:u})),a.createElement("br",null),a.createElement("button",{onClick:()=>g(!0)},"Create Account")))}t.default=()=>{[h.accountInformation,h.setAccountInformation]=a.useState({}),a.useEffect((()=>{fetch(s+"/uinfo?id="+localStorage.getItem("sessionID")).then((e=>e.json())).then((e=>h.setAccountInformation(e))).catch((()=>{"/chat"===c.pathname&&(window.location="/")}))}),[]),i=a.useRef(null),m=a.useRef(null),d=a.useRef(null),u=a.useRef(null);let e="medium",t="000000";if(l&&!h.hasRendered)switch(t=localStorage.getItem("themeHex"),null==t&&(t="000000"),localStorage.getItem("theme")){case"custom":case"dark":case"light":case"green":case"medium":e=localStorage.getItem("theme")}return[h.theme,h.setTheme]=a.useState(e),[h.themeHex,h.setThemeHex]=a.useState(t),a.createElement(a.Fragment,null,a.createElement(f,{className:"custom"===h.theme?"":"green"===h.theme?"greenThemed":"light"===h.theme?"lightThemed":"darkThemed"}),a.createElement("main",{id:"mainPage",className:"custom"===h.theme?"":"green"===h.theme?"greenThemed":"dark"===h.theme?"darkThemed":"lightThemed"},a.createElement("h1",null,"You found the Platypuss public beta!"),a.createElement("p",null,"This website sees new changes to the Platypuss client before they're published. This means you get to try out new features and improvements before they make their way to the main site. Beware though, many of the changes you see here aren't tested and may break certain functionality. Should anything not work properly you're better off using the ",a.createElement("a",{href:"https://platypuss.net"},"stable version")," of the site."),0!==Object.keys(h.accountInformation).length&&a.createElement("button",{style:{fontSize:"14pt"},onClick:()=>{window.location="/chat"}},"Chat"),0===Object.keys(h.accountInformation).length&&a.createElement(a.Fragment,null,a.createElement("button",{style:{fontSize:"14pt"},onClick:()=>{h.setActivePopover(a.createElement(E,null))}},"Sign In"),a.createElement("br",null)),0===Object.keys(h.accountInformation).length&&a.createElement("button",{style:{fontSize:"14pt"},onClick:()=>{h.setActivePopover(a.createElement(b,null))}},"Create Account")),a.createElement("footer",{className:"custom"===h.theme?"":"green"===h.theme?"greenThemed":"dark"===h.theme?"darkThemed":"lightThemed"},"do you like the new interim logo? if not then feel free to design your own and hit me up with a ",a.createElement("a",{href:"https://github.com/kettle-7/platypuss/issues/new"},"github issue")),a.createElement(y,{className:"custom"===h.theme?"":"green"===h.theme?"greenThemed":"light"===h.theme?"lightThemed":"darkThemed"}))};const w=()=>a.createElement("title",null,"(Beta!) Platypuss")}}]);
//# sourceMappingURL=component---src-pages-index-js-b9489f1da5b82d5830af.js.map